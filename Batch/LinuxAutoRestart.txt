
1. Create the script:

    sudo nano /usr/local/bin/check_restart.sh

2. Paste the script below and save:

    #!/bin/bash
    
    # Configuration
    CHECK_FOLDER="/root/.wine/drive_c/users/root/Application Data/MetaQuotes/Terminal/Common/Files"
    CHECK_FILE="restart.txt"
    RESTART_DELAY=300  # 5 minutes in seconds
    
    # Telegram credentials
    BOT_ID="8450507003:AAHhqJg_6x_ajStvx2_eoZRHnVIRpexzQc4"
    CHANNEL_ID="-1003285305833"
    
    # Full path to the file
    FILE_PATH="$CHECK_FOLDER/$CHECK_FILE"
    
    # Function to send Telegram message
    send_telegram() {
        local message="$1"
        curl -s -X POST "https://api.telegram.org/bot${BOT_ID}/sendMessage" \
            -d chat_id="${CHANNEL_ID}" \
            -d text="${message}" \
            -d parse_mode="HTML" > /dev/null
    }
    
    # Check if the file exists
    if [ -f "$FILE_PATH" ]; then
        echo "$(date): Found $CHECK_FILE - Initiating restart sequence"
        
        # Delete the file
        rm -f "$FILE_PATH"
        echo "$(date): Deleted $CHECK_FILE"
        
        # Download the first file
        echo "$(date): Downloading SNRC.ex5..."
        wget -O /root/mt5/MQL5/Experts/SNRC.ex5 https://sherifawzi.github.io/Tools/SNRC.ex5

        # Download the second file
        echo "$(date): Downloading SNRC.set..."
        wget -O /root/mt5/MQL5/Profiles/Tester/SNRC.set https://sherifawzi.github.io/Tools/SNRC.set

        # Send Telegram notification
        HOSTNAME=$(hostname)
        send_telegram "<b>Ubuntu Server Restart</b>%0A%0AServer: ${HOSTNAME}%0AFiles updated successfully%0ARestarting in 5 minutes...%0ATime: $(date '+%Y-%m-%d %H:%M:%S')"
        echo "$(date): Telegram notification sent"
        
        # Wait 5 minutes then restart
        echo "$(date): System will restart in 5 minutes..."
        sleep $RESTART_DELAY

        # Restart the system
        /sbin/shutdown -r now
    fi

3. Make it executable:

    sudo chmod +x /usr/local/bin/check_restart.sh

4. Add to crontab to run every 5 minutes:

    sudo crontab -e

5. Add this line: ( Select Nano if first time )

    */5 * * * * /usr/local/bin/check_restart.sh >> /var/log/restart_check.log 2>&1
